<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Pepper Test</title>

    <link type="text/css" href="{{ url_for('static', filename='css/style.css') }}">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript">
        $(function() {
            var input = $("#message");

            var socket = io.connect('http://' + document.domain + ':' + location.port + '/chat');
            socket.on('show message', function(msg) {
                $("#log").append('<p>Received: ' + msg.data + '</p>');
            });

            $("button#send_message").click(function() {
                if (input.val() !== '') {
                    socket.emit('send message', {data: input.val()});

                    input.val('');
                }
            });
        });
    </script>
</head>
<body>
<div id="log"></div>
<div>
    <textarea id="message" name="message" placeholder="Message"></textarea>
    <button id="send_message" type="button">Send</button>
</div>
</body>
</html>